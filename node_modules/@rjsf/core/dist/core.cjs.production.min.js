"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),r=require("react"),t=require("@rjsf/utils"),a=require("lodash/get"),i=require("lodash/isEmpty"),n=require("lodash/pick"),o=require("lodash/toPath"),s=require("lodash/cloneDeep"),l=require("lodash/isObject"),d=require("lodash/set"),u=require("nanoid"),c=require("lodash/omit"),m=require("markdown-to-jsx"),p=require("lodash/has"),h=require("lodash/unset");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=f(a),v=f(i),y=f(n),S=f(o),b=f(s),x=f(l),C=f(d),j=f(c),F=f(m),D=f(p),O=f(h);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},T.apply(this,arguments)}function E(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,I(e,r)}function I(e,r){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},I(e,r)}function k(e,r){if(null==e)return{};var t,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)r.indexOf(t=n[a])>=0||(i[t]=e[t]);return i}var w=["widget","title"],N=["widget","title"],A=["widget","title"];function B(){return u.nanoid()}function U(e){return Array.isArray(e)?e.map((function(e){return{key:B(),item:e}})):[]}function P(e){return Array.isArray(e)?e.map((function(e){return e.item})):[]}var q=function(r){function a(e){var a;(a=r.call(this,e)||this)._getNewFormDataRow=function(){var e=a.props,r=e.schema,i=e.registry.schemaUtils,n=r.items;return t.isFixedItems(r)&&t.allowAdditionalItems(r)&&(n=r.additionalItems),i.getDefaultFormState(n)},a.onAddClick=function(e){a._handleAddClick(e)},a.onAddIndexClick=function(e){return function(r){a._handleAddClick(r,e)}},a.onCopyIndexClick=function(e){return function(r){r&&r.preventDefault();var t=a.props.onChange,i=a.state.keyedFormData,n={key:B(),item:b.default(i[e].item)},o=[].concat(i);void 0!==e?o.splice(e+1,0,n):o.push(n),a.setState({keyedFormData:o,updatedKeyedFormData:!0},(function(){return t(P(o))}))}},a.onDropIndexClick=function(e){return function(r){r&&r.preventDefault();var t,i=a.props,n=i.onChange,o=i.errorSchema,s=a.state.keyedFormData;if(o)for(var l in t={},o){var d=parseInt(l);d<e?C.default(t,[d],o[l]):d>e&&C.default(t,[d-1],o[l])}var u=s.filter((function(r,t){return t!==e}));a.setState({keyedFormData:u,updatedKeyedFormData:!0},(function(){return n(P(u),t)}))}},a.onReorderClick=function(e,r){return function(t){t&&(t.preventDefault(),t.currentTarget.blur());var i,n=a.props,o=n.onChange,s=n.errorSchema;if(s)for(var l in i={},s){var d=parseInt(l);d==e?C.default(i,[r],s[e]):d==r?C.default(i,[e],s[r]):C.default(i,[l],s[d])}var u,c=a.state.keyedFormData,m=((u=c.slice()).splice(e,1),u.splice(r,0,c[e]),u);a.setState({keyedFormData:m},(function(){return o(P(m),i)}))}},a.onChangeForIndex=function(e){return function(r,t,i){var n,o=a.props,s=o.formData,l=o.errorSchema;(0,o.onChange)((Array.isArray(s)?s:[]).map((function(t,a){return e===a?void 0===r?null:r:t})),l&&l&&T({},l,((n={})[e]=t,n)),i)}},a.onSelectChange=function(e){var r=a.props,t=r.idSchema;(0,r.onChange)(e,void 0,t&&t.$id)};var i=e.formData,n=U(void 0===i?[]:i);return a.state={keyedFormData:n,updatedKeyedFormData:!1},a}E(a,r),a.getDerivedStateFromProps=function(e,r){if(r.updatedKeyedFormData)return{updatedKeyedFormData:!1};var t=Array.isArray(e.formData)?e.formData:[],a=r.keyedFormData||[];return{keyedFormData:t.length===a.length?a.map((function(e,r){return{key:e.key,item:t[r]}})):U(t)}};var i,n,o=a.prototype;return o.isItemRequired=function(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type},o.canAddItem=function(e){var r=this.props,a=r.schema,i=t.getUiOptions(r.uiSchema,r.registry.globalUiOptions).addable;return!1!==i&&(i=void 0===a.maxItems||e.length<a.maxItems),i},o._handleAddClick=function(e,r){e&&e.preventDefault();var t=this.props.onChange,a=this.state.keyedFormData,i={key:B(),item:this._getNewFormDataRow()},n=[].concat(a);void 0!==r?n.splice(r,0,i):n.push(i),this.setState({keyedFormData:n,updatedKeyedFormData:!0},(function(){return t(P(n))}))},o.render=function(){var r=this.props,a=r.schema,i=r.uiSchema,n=r.idSchema,o=r.registry,s=o.schemaUtils,l=o.translateString;if(!(t.ITEMS_KEY in a)){var d=t.getUiOptions(i),u=t.getTemplate("UnsupportedFieldTemplate",o,d);return e.jsx(u,{schema:a,idSchema:n,reason:l(t.TranslatableString.MissingItems),registry:o})}return s.isMultiSelect(a)?this.renderMultiSelect():t.isCustomWidget(i)?this.renderCustomWidget():t.isFixedItems(a)?this.renderFixedArray():s.isFilesArray(a,i)?this.renderFiles():this.renderNormalArray()},o.renderNormalArray=function(){var r=this,a=this.props,i=a.schema,n=a.uiSchema,o=void 0===n?{}:n,s=a.errorSchema,l=a.idSchema,d=a.name,u=a.disabled,c=void 0!==u&&u,m=a.readonly,p=void 0!==m&&m,h=a.autofocus,f=void 0!==h&&h,g=a.required,v=void 0!==g&&g,y=a.registry,S=a.onBlur,b=a.onFocus,C=a.idPrefix,j=a.idSeparator,F=void 0===j?"_":j,D=a.rawErrors,O=this.state.keyedFormData,E=void 0===i.title?d:i.title,I=y.schemaUtils,k=y.formContext,w=t.getUiOptions(o),N=x.default(i.items)?i.items:{},A=I.retrieveSchema(N),B=P(this.state.keyedFormData),U=this.canAddItem(B),q={canAdd:U,items:O.map((function(e,t){var a=e.key,i=e.item,n=I.retrieveSchema(N,i),u=s?s[t]:void 0,c=I.toIdSchema(n,l.$id+F+t,i,C,F);return r.renderArrayFieldItem({key:a,index:t,name:d&&d+"-"+t,canAdd:U,canMoveUp:t>0,canMoveDown:t<B.length-1,itemSchema:n,itemIdSchema:c,itemErrorSchema:u,itemData:i,itemUiSchema:o.items,autofocus:f&&0===t,onBlur:S,onFocus:b,rawErrors:D,totalItems:O.length})})),className:"field field-array field-array-of-"+A.type,disabled:c,idSchema:l,uiSchema:o,onAddClick:this.onAddClick,readonly:p,required:v,schema:i,title:E,formContext:k,formData:B,rawErrors:D,registry:y},_=t.getTemplate("ArrayFieldTemplate",y,w);return e.jsx(_,T({},q))},o.renderCustomWidget=function(){var r,a=this.props,i=a.schema,n=a.idSchema,o=a.uiSchema,s=a.disabled,l=void 0!==s&&s,d=a.readonly,u=void 0!==d&&d,c=a.autofocus,m=void 0!==c&&c,p=a.required,h=void 0!==p&&p,f=a.hideError,g=a.placeholder,v=a.onBlur,y=a.onFocus,S=a.formData,b=void 0===S?[]:S,x=a.registry,C=a.rawErrors,j=a.name,F=x.widgets,D=x.formContext,O=x.globalUiOptions,T=x.schemaUtils,E=t.getUiOptions(o,O),I=E.widget,N=E.title,A=k(E,w),B=t.getWidget(i,I,F),U=null!=(r=null!=N?N:i.title)?r:j,P=T.getDisplayLabel(i,o,O);return e.jsx(B,{id:n.$id,name:j,multiple:!0,onChange:this.onSelectChange,onBlur:v,onFocus:y,options:A,schema:i,uiSchema:o,registry:x,value:b,disabled:l,readonly:u,hideError:f,required:h,label:U,hideLabel:!P,placeholder:g,formContext:D,autofocus:m,rawErrors:C})},o.renderMultiSelect=function(){var r,a=this.props,i=a.schema,n=a.idSchema,o=a.uiSchema,s=a.formData,l=void 0===s?[]:s,d=a.disabled,u=void 0!==d&&d,c=a.readonly,m=void 0!==c&&c,p=a.autofocus,h=void 0!==p&&p,f=a.required,g=void 0!==f&&f,v=a.placeholder,y=a.onBlur,S=a.onFocus,b=a.registry,x=a.rawErrors,C=a.name,j=b.widgets,F=b.schemaUtils,D=b.formContext,O=b.globalUiOptions,E=F.retrieveSchema(i.items,l),I=t.optionsList(E),w=t.getUiOptions(o,O),A=w.widget,B=void 0===A?"select":A,U=w.title,P=k(w,N),q=t.getWidget(i,B,j),_=null!=(r=null!=U?U:i.title)?r:C,R=F.getDisplayLabel(i,o,O);return e.jsx(q,{id:n.$id,name:C,multiple:!0,onChange:this.onSelectChange,onBlur:y,onFocus:S,options:T({},P,{enumOptions:I}),schema:i,uiSchema:o,registry:b,value:l,disabled:u,readonly:m,required:g,label:_,hideLabel:!R,placeholder:v,formContext:D,autofocus:h,rawErrors:x})},o.renderFiles=function(){var r,a=this.props,i=a.schema,n=a.uiSchema,o=a.idSchema,s=a.name,l=a.disabled,d=void 0!==l&&l,u=a.readonly,c=void 0!==u&&u,m=a.autofocus,p=void 0!==m&&m,h=a.required,f=void 0!==h&&h,g=a.onBlur,v=a.onFocus,y=a.registry,S=a.formData,b=void 0===S?[]:S,x=a.rawErrors,C=y.widgets,j=y.formContext,F=y.globalUiOptions,D=y.schemaUtils,O=t.getUiOptions(n,F),T=O.widget,E=void 0===T?"files":T,I=O.title,w=k(O,A),N=t.getWidget(i,E,C),B=null!=(r=null!=I?I:i.title)?r:s,U=D.getDisplayLabel(i,n,F);return e.jsx(N,{options:w,id:o.$id,name:s,multiple:!0,onChange:this.onSelectChange,onBlur:g,onFocus:v,schema:i,uiSchema:n,value:b,disabled:d,readonly:c,required:f,registry:y,formContext:j,autofocus:p,rawErrors:x,label:B,hideLabel:!U})},o.renderFixedArray=function(){var r=this,a=this.props,i=a.schema,n=a.uiSchema,o=void 0===n?{}:n,s=a.formData,l=void 0===s?[]:s,d=a.errorSchema,u=a.idPrefix,c=a.idSeparator,m=void 0===c?"_":c,p=a.idSchema,h=a.name,f=a.disabled,g=void 0!==f&&f,v=a.readonly,y=void 0!==v&&v,S=a.autofocus,b=void 0!==S&&S,C=a.required,j=void 0!==C&&C,F=a.registry,D=a.onBlur,O=a.onFocus,E=a.rawErrors,I=this.state.keyedFormData,k=this.props.formData,w=void 0===k?[]:k,N=i.title||h,A=t.getUiOptions(o),B=F.schemaUtils,U=F.formContext,P=(x.default(i.items)?i.items:[]).map((function(e,r){return B.retrieveSchema(e,l[r])})),q=x.default(i.additionalItems)?B.retrieveSchema(i.additionalItems,l):null;(!w||w.length<P.length)&&(w=(w=w||[]).concat(new Array(P.length-w.length)));var _=this.canAddItem(w)&&!!q,R={canAdd:_,className:"field field-array field-array-fixed-items",disabled:g,idSchema:p,formData:l,items:I.map((function(e,t){var a=e.key,n=e.item,s=t>=P.length,l=s&&x.default(i.additionalItems)?B.retrieveSchema(i.additionalItems,n):P[t],c=B.toIdSchema(l,p.$id+m+t,n,u,m),f=s?o.additionalItems||{}:Array.isArray(o.items)?o.items[t]:o.items||{};return r.renderArrayFieldItem({key:a,index:t,name:h&&h+"-"+t,canAdd:_,canRemove:s,canMoveUp:t>=P.length+1,canMoveDown:s&&t<w.length-1,itemSchema:l,itemData:n,itemUiSchema:f,itemIdSchema:c,itemErrorSchema:d?d[t]:void 0,autofocus:b&&0===t,onBlur:D,onFocus:O,rawErrors:E,totalItems:I.length})})),onAddClick:this.onAddClick,readonly:y,required:j,registry:F,schema:i,uiSchema:o,title:N,formContext:U,rawErrors:E},V=t.getTemplate("ArrayFieldTemplate",F,A);return e.jsx(V,T({},R))},o.renderArrayFieldItem=function(r){var a=r.key,i=r.index,n=r.name,o=r.canAdd,s=r.canRemove,l=void 0===s||s,d=r.canMoveUp,u=r.canMoveDown,c=r.itemSchema,m=r.itemData,p=r.itemUiSchema,h=r.itemIdSchema,f=r.itemErrorSchema,g=r.autofocus,v=r.onBlur,y=r.onFocus,S=r.rawErrors,b=r.totalItems,x=this.props,C=x.disabled,j=x.hideError,F=x.idPrefix,D=x.idSeparator,O=x.readonly,T=x.registry,E=x.formContext,I=T.fields,k=I.ArraySchemaField||I.SchemaField,w=t.getUiOptions(x.uiSchema,T.globalUiOptions),N=w.orderable,A=void 0===N||N,B=w.removable,U=w.copyable,P={moveUp:A&&d,moveDown:A&&u,copy:void 0!==U&&U&&o,remove:(void 0===B||B)&&l,toolbar:!1};return P.toolbar=Object.keys(P).some((function(e){return P[e]})),{children:e.jsx(k,{name:n,index:i,schema:c,uiSchema:p,formData:m,formContext:E,errorSchema:f,idPrefix:F,idSeparator:D,idSchema:h,required:this.isItemRequired(c),onChange:this.onChangeForIndex(i),onBlur:v,onFocus:y,registry:T,disabled:C,readonly:O,hideError:j,autofocus:g,rawErrors:S}),className:"array-item",disabled:C,canAdd:o,hasCopy:P.copy,hasToolbar:P.toolbar,hasMoveUp:P.moveUp,hasMoveDown:P.moveDown,hasRemove:P.remove,index:i,totalItems:b,key:a,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:O,registry:T,schema:c,uiSchema:p}},i=a,(n=[{key:"itemTitle",get:function(){var e=this.props,r=e.schema;return g.default(r,[t.ITEMS_KEY,"title"],g.default(r,[t.ITEMS_KEY,"description"],(0,e.registry.translateString)(t.TranslatableString.ArrayItemTitle)))}}])&&function(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a.key))?i:String(i),a)}var i}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),a}(r.Component),_=["widget","title","label"];function R(r){var a,i,n=r.schema,o=r.name,s=r.uiSchema,l=r.idSchema,d=r.formData,u=r.registry,c=r.required,m=r.disabled,p=r.readonly,h=r.autofocus,f=r.onChange,g=r.onFocus,v=r.onBlur,y=r.rawErrors,S=n.title,b=u.widgets,C=u.formContext,j=u.translateString,F=t.getUiOptions(s,u.globalUiOptions),D=F.widget,O=void 0===D?"checkbox":D,E=F.title,I=F.label,w=void 0===I||I,N=k(F,_),A=t.getWidget(n,O,b),B=j(t.TranslatableString.YesLabel),U=j(t.TranslatableString.NoLabel),P=null!=(a=null!=E?E:S)?a:o;if(Array.isArray(n.oneOf))i=t.optionsList({oneOf:n.oneOf.map((function(e){if(x.default(e))return T({},e,{title:e.title||(!0===e.const?B:U)})})).filter((function(e){return e}))});else{var q,R=n,V=null!=(q=n.enum)?q:[!0,!1];i=!R.enumNames&&2===V.length&&V.every((function(e){return"boolean"==typeof e}))?[{value:V[0],label:V[0]?B:U},{value:V[1],label:V[1]?B:U}]:t.optionsList({enum:V,enumNames:R.enumNames})}return e.jsx(A,{options:T({},N,{enumOptions:i}),schema:n,uiSchema:s,id:l.$id,name:o,onChange:f,onFocus:g,onBlur:v,label:P,hideLabel:!w,value:d,required:c,disabled:m,readonly:p,registry:u,formContext:C,autofocus:h,rawErrors:y})}var V=["widget","placeholder","autofocus","autocomplete","title"],L=function(r){function a(e){var t;(t=r.call(this,e)||this).onOptionChange=function(e){var r=t.state,a=r.selectedOption,i=r.retrievedOptions,n=t.props,o=n.formData,s=n.onChange,l=n.registry.schemaUtils,d=void 0!==e?parseInt(e,10):-1;if(d!==a){var u=d>=0?i[d]:void 0,c=l.sanitizeDataForNewSchema(u,a>=0?i[a]:void 0,o);c&&u&&(c=l.getDefaultFormState(u,c,"excludeObjectChildren")),s(c,void 0,t.getFieldId()),t.setState({selectedOption:d})}};var a=t.props,i=a.formData,n=a.registry.schemaUtils,o=a.options.map((function(e){return n.retrieveSchema(e,i)}));return t.state={retrievedOptions:o,selectedOption:t.getMatchingOption(0,i,o)},t}E(a,r);var i=a.prototype;return i.componentDidUpdate=function(e,r){var a=this.props,i=a.formData,n=a.options,o=a.idSchema,s=this.state.selectedOption,l=this.state;if(!t.deepEquals(e.options,n)){var d=this.props.registry.schemaUtils;l={selectedOption:s,retrievedOptions:n.map((function(e){return d.retrieveSchema(e,i)}))}}if(!t.deepEquals(i,e.formData)&&o.$id===e.idSchema.$id){var u=l.retrievedOptions,c=this.getMatchingOption(s,i,u);r&&c!==s&&(l={selectedOption:c,retrievedOptions:u})}l!==this.state&&this.setState(l)},i.getMatchingOption=function(e,r,t){var a=this.props.registry.schemaUtils.getClosestMatchingOption(r,t,e);return a>0?a:e||0},i.getFieldId=function(){var e=this.props;return e.idSchema.$id+(e.schema.oneOf?"__oneof_select":"__anyof_select")},i.render=function(){var r,a=this.props,i=a.name,n=a.baseType,o=a.disabled,s=void 0!==o&&o,l=a.errorSchema,d=void 0===l?{}:l,u=a.formContext,c=a.onBlur,m=a.onFocus,p=a.registry,h=a.schema,f=a.uiSchema,y=p.widgets,S=p.translateString,b=p.globalUiOptions,x=p.schemaUtils,C=p.fields.SchemaField,F=this.state,D=F.selectedOption,O=F.retrievedOptions,E=t.getUiOptions(f,b),I=E.widget,w=void 0===I?"select":I,N=E.placeholder,A=E.autofocus,B=E.autocomplete,U=E.title,P=void 0===U?h.title:U,q=k(E,V),_=t.getWidget({type:"number"},w,y),R=g.default(d,t.ERRORS_KEY,[]),L=j.default(d,[t.ERRORS_KEY]),K=x.getDisplayLabel(h,f,b),W=D>=0&&O[D]||null;W&&(r=W.type?W:Object.assign({},W,{type:n}));var M=P?t.TranslatableString.TitleOptionPrefix:t.TranslatableString.OptionPrefix,Y=P?[P]:[],$=O.map((function(e,r){return{label:e.title||S(M,Y.concat(String(r+1))),value:r}}));return e.jsxs("div",{className:"panel panel-default panel-body",children:[e.jsx("div",{className:"form-group",children:e.jsx(_,{id:this.getFieldId(),name:i+(h.oneOf?"__oneof_select":"__anyof_select"),schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:c,onFocus:m,disabled:s||v.default($),multiple:!1,rawErrors:R,errorSchema:L,value:D>=0?D:void 0,options:T({enumOptions:$},q),registry:p,formContext:u,placeholder:N,autocomplete:B,autofocus:A,label:null!=P?P:i,hideLabel:!K})}),null!==W&&e.jsx(C,T({},this.props,{schema:r}))]})},a}(r.Component),K=/\.([0-9]*0)*$/,W=/[0.]0*$/;function M(a){var i=a.registry,n=a.onChange,o=a.formData,s=r.useState(a.value),l=s[0],d=s[1],u=i.fields.StringField,c=o,m=r.useCallback((function(e){d(e),"."===(""+e).charAt(0)&&(e="0"+e);var r="string"==typeof e&&e.match(K)?t.asNumber(e.replace(W,"")):t.asNumber(e);n(r)}),[n]);if("string"==typeof l&&"number"==typeof c){var p=new RegExp((""+c).replace(".","\\.")+"\\.?0*$");l.match(p)&&(c=l)}return e.jsx(u,T({},a,{formData:c,onChange:m}))}var Y=function(r){function a(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=r.call.apply(r,[this].concat(i))||this).state={wasPropertyKeyModified:!1,additionalProperties:{}},e.onPropertyChange=function(r,t){return void 0===t&&(t=!1),function(a,i,n){var o,s,l=e.props,d=l.errorSchema;void 0===a&&t&&(a=""),(0,l.onChange)(T({},l.formData,((o={})[r]=a,o)),d&&d&&T({},d,((s={})[r]=i,s)),n)}},e.onDropPropertyClick=function(r){return function(t){t.preventDefault();var a=e.props,i=a.onChange,n=T({},a.formData);O.default(n,r),i(n)}},e.getAvailableKey=function(r,a){for(var i=e.props,n=t.getUiOptions(i.uiSchema,i.registry.globalUiOptions).duplicateKeySuffixSeparator,o=void 0===n?"-":n,s=0,l=r;D.default(a,l);)l=""+r+o+ ++s;return l},e.onKeyChange=function(r){return function(t,a){var i,n;if(r!==t){var o=e.props,s=o.formData,l=o.onChange,d=o.errorSchema;t=e.getAvailableKey(t,s);var u=T({},s),c=((i={})[r]=t,i),m=Object.keys(u).map((function(e){var r;return(r={})[c[e]||e]=u[e],r})),p=Object.assign.apply(Object,[{}].concat(m));e.setState({wasPropertyKeyModified:!0}),l(p,d&&d&&T({},d,((n={})[t]=a,n)))}}},e.handleAddClick=function(r){return function(){if(r.additionalProperties){var a=e.props,i=a.formData,n=a.onChange,o=a.registry,s=T({},i),l=void 0;if(x.default(r.additionalProperties)){l=r.additionalProperties.type;var d=r.additionalProperties;t.REF_KEY in d&&(l=(d=o.schemaUtils.retrieveSchema({$ref:d[t.REF_KEY]},i)).type),l||!(t.ANY_OF_KEY in d)&&!(t.ONE_OF_KEY in d)||(l="object")}var u=e.getAvailableKey("newKey",s);C.default(s,u,e.getDefaultValue(l)),n(s)}}},e}E(a,r);var i=a.prototype;return i.isRequired=function(e){var r=this.props.schema;return Array.isArray(r.required)&&-1!==r.required.indexOf(e)},i.getDefaultValue=function(e){var r=this.props.registry.translateString;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return r(t.TranslatableString.NewStringDefault)}},i.render=function(){var r,a,i,n,o=this,s=this.props,l=s.uiSchema,d=void 0===l?{}:l,u=s.formData,c=s.errorSchema,m=s.idSchema,p=s.name,h=s.required,f=void 0!==h&&h,v=s.disabled,y=void 0!==v&&v,S=s.readonly,b=void 0!==S&&S,x=s.hideError,C=s.idPrefix,j=s.idSeparator,O=s.onBlur,E=s.onFocus,I=s.registry,k=I.formContext,w=I.translateString,N=I.globalUiOptions,A=I.fields.SchemaField,B=I.schemaUtils.retrieveSchema(s.schema,u),U=t.getUiOptions(d,N),P=B.properties,q=void 0===P?{}:P,_=null!=(r=null!=(a=U.title)?a:B.title)?r:p,R=null!=(i=U.description)?i:B.description;try{var V=Object.keys(q);n=t.orderProperties(V,U.order)}catch(r){return e.jsxs("div",{children:[e.jsx("p",{className:"config-error",style:{color:"red"},children:e.jsx(F.default,{children:w(t.TranslatableString.InvalidObjectField,[p||"root",r.message])})}),e.jsx("pre",{children:JSON.stringify(B)})]})}var L=t.getTemplate("ObjectFieldTemplate",I,U),K={title:!1===U.label?"":_,description:!1===U.label?void 0:R,properties:n.map((function(r){var a=D.default(B,[t.PROPERTIES_KEY,r,t.ADDITIONAL_PROPERTY_FLAG]),i=a?d.additionalProperties:d[r],n="hidden"===t.getUiOptions(i).widget,s=g.default(m,[r],{});return{content:e.jsx(A,{name:r,required:o.isRequired(r),schema:g.default(B,[t.PROPERTIES_KEY,r],{}),uiSchema:i,errorSchema:g.default(c,r),idSchema:s,idPrefix:C,idSeparator:j,formData:g.default(u,r),formContext:k,wasPropertyKeyModified:o.state.wasPropertyKeyModified,onKeyChange:o.onKeyChange(r),onChange:o.onPropertyChange(r,a),onBlur:O,onFocus:E,registry:I,disabled:y,readonly:b,hideError:x,onDropPropertyClick:o.onDropPropertyClick},r),name:r,readonly:b,disabled:y,required:f,hidden:n}})),readonly:b,disabled:y,required:f,idSchema:m,uiSchema:d,schema:B,formData:u,formContext:k,registry:I};return e.jsx(L,T({},K,{onAddClick:this.handleAddClick}))},a}(r.Component),$=["__errors"],z={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function G(a){var i=a.schema,n=a.idSchema,o=a.uiSchema,s=a.formData,l=a.errorSchema,d=a.idPrefix,u=a.idSeparator,c=a.name,m=a.onChange,p=a.onKeyChange,h=a.onDropPropertyClick,f=a.required,g=a.registry,v=a.wasPropertyKeyModified,y=void 0!==v&&v,S=g.formContext,b=g.schemaUtils,C=g.globalUiOptions,F=t.getUiOptions(o,C),D=t.getTemplate("FieldTemplate",g,F),O=t.getTemplate("DescriptionFieldTemplate",g,F),E=t.getTemplate("FieldHelpTemplate",g,F),I=t.getTemplate("FieldErrorTemplate",g,F),w=b.retrieveSchema(i,s),N=n[t.ID_KEY],A=t.mergeObjects(b.toIdSchema(w,N,s,d,u),n),B=r.useCallback((function(e,r,t){return m(e,r,t||N)}),[N,m]),U=function(r,a,i,n){var o=a.field,s=n.fields,l=n.translateString;if("function"==typeof o)return o;if("string"==typeof o&&o in s)return s[o];var d=t.getSchemaType(r),u=Array.isArray(d)?d[0]:d||"",c=z[u];return c||!r.anyOf&&!r.oneOf?c in s?s[c]:function(){var o=t.getTemplate("UnsupportedFieldTemplate",n,a);return e.jsx(o,{schema:r,idSchema:i,reason:l(t.TranslatableString.UnknownFieldType,[String(r.type)]),registry:n})}:function(){return null}}(w,F,A,g),P=Boolean(a.disabled||F.disabled),q=Boolean(a.readonly||F.readonly||a.schema.readOnly||w.readOnly),_=F.hideError,R=void 0===_?a.hideError:Boolean(_),V=Boolean(a.autofocus||F.autofocus);if(0===Object.keys(w).length)return null;var L=b.getDisplayLabel(w,o,C),K=l||{},W=K.__errors,M=k(K,$),Y=j.default(o,["ui:classNames","classNames","ui:style"]);t.UI_OPTIONS_KEY in Y&&(Y[t.UI_OPTIONS_KEY]=j.default(Y[t.UI_OPTIONS_KEY],["classNames","style"]));var G,H=e.jsx(U,T({},a,{onChange:B,idSchema:A,schema:w,uiSchema:Y,disabled:P,readonly:q,hideError:R,autofocus:V,errorSchema:M,formContext:S,rawErrors:W})),J=A[t.ID_KEY];G=y||t.ADDITIONAL_PROPERTY_FLAG in w?c:F.title||a.schema.title||w.title||c;var Q=F.description||a.schema.description||w.description||"",X=F.help,Z="hidden"===F.widget,ee=["form-group","field","field-"+w.type];!R&&W&&W.length>0&&ee.push("field-error has-error has-danger"),null!=o&&o.classNames&&ee.push(o.classNames),F.classNames&&ee.push(F.classNames);var re=e.jsx(E,{help:X,idSchema:A,schema:w,uiSchema:o,hasErrors:!R&&W&&W.length>0,registry:g}),te=R?void 0:e.jsx(I,{errors:W,errorSchema:l,idSchema:A,schema:w,uiSchema:o,registry:g}),ae={description:e.jsx(O,{id:t.descriptionId(J),description:Q,schema:w,uiSchema:o,registry:g}),rawDescription:Q,help:re,rawHelp:"string"==typeof X?X:void 0,errors:te,rawErrors:R?void 0:W,id:J,label:G,hidden:Z,onChange:m,onKeyChange:p,onDropPropertyClick:h,required:f,disabled:P,readonly:q,hideError:R,displayLabel:L,classNames:ee.join(" ").trim(),style:F.style,formContext:S,formData:s,schema:w,uiSchema:o,registry:g},ie=g.fields.AnyOfField,ne=g.fields.OneOfField,oe=(null==o?void 0:o["ui:field"])&&!0===(null==o?void 0:o["ui:fieldReplacesAnyOrOneOf"]);return e.jsx(D,T({},ae,{children:e.jsxs(e.Fragment,{children:[H,w.anyOf&&!oe&&!b.isSelect(w)&&e.jsx(ie,{name:c,disabled:P,readonly:q,hideError:R,errorSchema:l,formData:s,formContext:S,idPrefix:d,idSchema:A,idSeparator:u,onBlur:a.onBlur,onChange:a.onChange,onFocus:a.onFocus,options:w.anyOf.map((function(e){return b.retrieveSchema(x.default(e)?e:{},s)})),baseType:w.type,registry:g,schema:w,uiSchema:o}),w.oneOf&&!oe&&!b.isSelect(w)&&e.jsx(ne,{name:c,disabled:P,readonly:q,hideError:R,errorSchema:l,formData:s,formContext:S,idPrefix:d,idSchema:A,idSeparator:u,onBlur:a.onBlur,onChange:a.onChange,onFocus:a.onFocus,options:w.oneOf.map((function(e){return b.retrieveSchema(x.default(e)?e:{},s)})),baseType:w.type,registry:g,schema:w,uiSchema:o})]})}))}var H=function(r){function a(){return r.apply(this,arguments)||this}E(a,r);var i=a.prototype;return i.shouldComponentUpdate=function(e){return!t.deepEquals(this.props,e)},i.render=function(){return e.jsx(G,T({},this.props))},a}(r.Component),J=["widget","placeholder","title"];function Q(r){var a,i=r.schema,n=r.name,o=r.uiSchema,s=r.idSchema,l=r.formData,d=r.required,u=r.disabled,c=void 0!==u&&u,m=r.readonly,p=void 0!==m&&m,h=r.autofocus,f=void 0!==h&&h,g=r.onChange,v=r.onBlur,y=r.onFocus,S=r.registry,b=r.rawErrors,x=i.title,C=i.format,j=S.widgets,F=S.formContext,D=S.schemaUtils,O=S.globalUiOptions,E=D.isSelect(i)?t.optionsList(i):void 0,I=E?"select":"text";C&&t.hasWidget(i,C,j)&&(I=C);var w=t.getUiOptions(o),N=w.widget,A=void 0===N?I:N,B=w.placeholder,U=void 0===B?"":B,P=w.title,q=k(w,J),_=D.getDisplayLabel(i,o,O),R=null!=(a=null!=P?P:x)?a:n,V=t.getWidget(i,A,j);return e.jsx(V,{options:T({},q,{enumOptions:E}),schema:i,uiSchema:o,id:s.$id,name:n,label:R,hideLabel:!_,value:l,onChange:g,onBlur:v,onFocus:y,required:d,disabled:c,readonly:p,formContext:F,autofocus:f,registry:S,placeholder:U,rawErrors:b})}function X(e){var t=e.formData,a=e.onChange;return r.useEffect((function(){void 0===t&&a(null)}),[t,a]),null}function Z(r){var a=r.idSchema,i=r.description,n=r.registry,o=r.schema,s=r.uiSchema,l=t.getUiOptions(s,n.globalUiOptions),d=l.label;if(!i||void 0!==d&&!d)return null;var u=t.getTemplate("DescriptionFieldTemplate",n,l);return e.jsx(u,{id:t.descriptionId(a),description:i,schema:o,uiSchema:s,registry:n})}function ee(r){var t=r.disabled,a=r.hasToolbar,i=r.hasMoveDown,n=r.hasMoveUp,o=r.hasRemove,s=r.hasCopy,l=r.index,d=r.onCopyIndexClick,u=r.onDropIndexClick,c=r.onReorderClick,m=r.readonly,p=r.registry,h=r.uiSchema,f=p.templates.ButtonTemplates,g=f.CopyButton,v=f.MoveDownButton,y=f.MoveUpButton,S=f.RemoveButton,b={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return e.jsxs("div",{className:r.className,children:[e.jsx("div",{className:a?"col-xs-9":"col-xs-12",children:r.children}),a&&e.jsx("div",{className:"col-xs-3 array-item-toolbox",children:e.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(n||i)&&e.jsx(y,{style:b,disabled:t||m||!n,onClick:c(l,l-1),uiSchema:h,registry:p}),(n||i)&&e.jsx(v,{style:b,disabled:t||m||!i,onClick:c(l,l+1),uiSchema:h,registry:p}),s&&e.jsx(g,{style:b,disabled:t||m,onClick:d(l),uiSchema:h,registry:p}),o&&e.jsx(S,{style:b,disabled:t||m,onClick:u(l),uiSchema:h,registry:p})]})})]})}var re=["key"];function te(r){var a=r.canAdd,i=r.className,n=r.disabled,o=r.idSchema,s=r.uiSchema,l=r.items,d=r.onAddClick,u=r.readonly,c=r.registry,m=r.required,p=r.schema,h=r.title,f=t.getUiOptions(s),g=t.getTemplate("ArrayFieldDescriptionTemplate",c,f),v=t.getTemplate("ArrayFieldItemTemplate",c,f),y=t.getTemplate("ArrayFieldTitleTemplate",c,f),S=c.templates.ButtonTemplates.AddButton;return e.jsxs("fieldset",{className:i,id:o.$id,children:[e.jsx(y,{idSchema:o,title:f.title||h,required:m,schema:p,uiSchema:s,registry:c}),e.jsx(g,{idSchema:o,description:f.description||p.description,schema:p,uiSchema:s,registry:c}),e.jsx("div",{className:"row array-item-list",children:l&&l.map((function(r){var t=r.key,a=k(r,re);return e.jsx(v,T({},a),t)}))}),a&&e.jsx(S,{className:"array-item-add",onClick:d,disabled:n||u,uiSchema:s,registry:c})]})}function ae(r){var a=r.idSchema,i=r.title,n=r.schema,o=r.uiSchema,s=r.required,l=r.registry,d=t.getUiOptions(o,l.globalUiOptions),u=d.label;if(!i||void 0!==u&&!u)return null;var c=t.getTemplate("TitleFieldTemplate",l,d);return e.jsx(c,{id:t.titleId(a),title:i,required:s,schema:n,uiSchema:o,registry:l})}var ie=["id","name","value","readonly","disabled","autofocus","onBlur","onFocus","onChange","onChangeOverride","options","schema","uiSchema","formContext","registry","rawErrors","type"];function ne(a){var i=a.id,n=a.value,o=a.readonly,s=a.disabled,l=a.autofocus,d=a.onBlur,u=a.onFocus,c=a.onChange,m=a.onChangeOverride,p=a.options,h=a.schema,f=a.type,g=k(a,ie);if(!i)throw console.log("No id for",a),new Error("no id for props "+JSON.stringify(a));var v,y=T({},g,t.getInputProps(h,f,p));v="number"===y.type||"integer"===y.type?n||0===n?n:"":null==n?"":n;var S=r.useCallback((function(e){var r=e.target.value;return c(""===r?p.emptyValue:r)}),[c,p]),b=r.useCallback((function(e){return d(i,e.target.value)}),[d,i]),x=r.useCallback((function(e){return u(i,e.target.value)}),[u,i]);return e.jsxs(e.Fragment,{children:[e.jsx("input",T({id:i,name:i,className:"form-control",readOnly:o,disabled:s,autoFocus:l,value:v},y,{list:h.examples?t.examplesId(i):void 0,onChange:m||S,onBlur:b,onFocus:x,"aria-describedby":t.ariaDescribedByIds(i,!!h.examples)})),Array.isArray(h.examples)&&e.jsx("datalist",{id:t.examplesId(i),children:h.examples.concat(h.default&&!h.examples.includes(h.default)?[h.default]:[]).map((function(r){return e.jsx("option",{value:r},r)}))},"datalist_"+i)]})}function oe(r){var a=t.getSubmitButtonOptions(r.uiSchema),i=a.props,n=void 0===i?{}:i;return a.norender?null:e.jsx("div",{children:e.jsx("button",T({type:"submit"},n,{className:"btn btn-info "+n.className,children:a.submitText}))})}var se=["iconType","icon","className","uiSchema","registry"];function le(r){var t=r.iconType,a=void 0===t?"default":t,i=r.icon,n=r.className,o=k(r,se);return e.jsx("button",T({type:"button",className:"btn btn-"+a+" "+n},o,{children:e.jsx("i",{className:"glyphicon glyphicon-"+i})}))}function de(r){return e.jsx(le,T({title:(0,r.registry.translateString)(t.TranslatableString.CopyButton),className:"array-item-copy"},r,{icon:"copy"}))}function ue(r){return e.jsx(le,T({title:(0,r.registry.translateString)(t.TranslatableString.MoveDownButton),className:"array-item-move-down"},r,{icon:"arrow-down"}))}function ce(r){return e.jsx(le,T({title:(0,r.registry.translateString)(t.TranslatableString.MoveUpButton),className:"array-item-move-up"},r,{icon:"arrow-up"}))}function me(r){return e.jsx(le,T({title:(0,r.registry.translateString)(t.TranslatableString.RemoveButton),className:"array-item-remove"},r,{iconType:"danger",icon:"remove"}))}function pe(r){var a=r.onClick,i=r.disabled,n=r.registry;return e.jsx("div",{className:"row",children:e.jsx("p",{className:"col-xs-3 col-xs-offset-9 text-right "+r.className,children:e.jsx(le,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:(0,n.translateString)(t.TranslatableString.AddButton),onClick:a,disabled:i,registry:n})})})}function he(r){var t=r.description;return t?e.jsx("string"==typeof t?"p":"div",{id:r.id,className:"field-description",children:t}):null}function fe(r){var a=r.errors;return e.jsxs("div",{className:"panel panel-danger errors",children:[e.jsx("div",{className:"panel-heading",children:e.jsx("h3",{className:"panel-title",children:(0,r.registry.translateString)(t.TranslatableString.ErrorsLabel)})}),e.jsx("ul",{className:"list-group",children:a.map((function(r,t){return e.jsx("li",{className:"list-group-item text-danger",children:r.stack},t)}))})]})}function ge(r){var t=r.label;return t?e.jsxs("label",{className:"control-label",htmlFor:r.id,children:[t,r.required&&e.jsx("span",{className:"required",children:"*"})]}):null}function ve(r){var a=r.id,i=r.label,n=r.children,o=r.errors,s=r.help,l=r.description,d=r.hidden,u=r.required,c=r.displayLabel,m=r.registry,p=t.getUiOptions(r.uiSchema),h=t.getTemplate("WrapIfAdditionalTemplate",m,p);return d?e.jsx("div",{className:"hidden",children:n}):e.jsxs(h,T({},r,{children:[c&&e.jsx(ge,{label:i,required:u,id:a}),c&&l?l:null,n,o,s]}))}function ye(r){var a=r.errors,i=void 0===a?[]:a;if(0===i.length)return null;var n=t.errorId(r.idSchema);return e.jsx("div",{children:e.jsx("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:i.filter((function(e){return!!e})).map((function(r,t){return e.jsx("li",{className:"text-danger",children:r},t)}))})})}function Se(r){var a=r.help;if(!a)return null;var i=t.helpId(r.idSchema);return e.jsx("string"==typeof a?"p":"div",{id:i,className:"help-block",children:a})}function be(r){var a=r.description,i=r.disabled,n=r.formData,o=r.idSchema,s=r.onAddClick,l=r.properties,d=r.readonly,u=r.registry,c=r.required,m=r.schema,p=r.title,h=r.uiSchema,f=t.getUiOptions(h),g=t.getTemplate("TitleFieldTemplate",u,f),v=t.getTemplate("DescriptionFieldTemplate",u,f),y=u.templates.ButtonTemplates.AddButton;return e.jsxs("fieldset",{id:o.$id,children:[p&&e.jsx(g,{id:t.titleId(o),title:p,required:c,schema:m,uiSchema:h,registry:u}),a&&e.jsx(v,{id:t.descriptionId(o),description:a,schema:m,uiSchema:h,registry:u}),l.map((function(e){return e.content})),t.canExpand(m,h,n)&&e.jsx(y,{className:"object-property-expand",onClick:s(m),disabled:i||d,uiSchema:h,registry:u})]})}function xe(r){return e.jsxs("legend",{id:r.id,children:[r.title,r.required&&e.jsx("span",{className:"required",children:"*"})]})}function Ce(r){var a=r.schema,i=r.idSchema,n=r.reason,o=r.registry.translateString,s=t.TranslatableString.UnsupportedField,l=[];return i&&i.$id&&(s=t.TranslatableString.UnsupportedFieldWithId,l.push(i.$id)),n&&(s=s===t.TranslatableString.UnsupportedField?t.TranslatableString.UnsupportedFieldWithReason:t.TranslatableString.UnsupportedFieldWithIdAndReason,l.push(n)),e.jsxs("div",{className:"unsupported-field",children:[e.jsx("p",{children:e.jsx(F.default,{children:o(s,l)})}),a&&e.jsx("pre",{children:JSON.stringify(a,null,2)})]})}function je(r){var a=r.id,i=r.classNames,n=r.style,o=r.disabled,s=r.label,l=r.onKeyChange,d=r.onDropPropertyClick,u=r.readonly,c=r.required,m=r.schema,p=r.children,h=r.uiSchema,f=r.registry,g=f.templates.ButtonTemplates.RemoveButton,v=(0,f.translateString)(t.TranslatableString.KeyLabel,[s]);return e.jsx("div",t.ADDITIONAL_PROPERTY_FLAG in m?{className:i,style:n,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xs-5 form-additional",children:e.jsxs("div",{className:"form-group",children:[e.jsx(ge,{label:v,required:c,id:a+"-key"}),e.jsx("input",{className:"form-control",type:"text",id:a+"-key",onBlur:function(e){return l(e.target.value)},defaultValue:s})]})}),e.jsx("div",{className:"form-additional form-group col-xs-5",children:p}),e.jsx("div",{className:"col-xs-2",children:e.jsx(g,{className:"array-item-remove btn-block",style:{border:"0"},disabled:o||u,onClick:d(s),uiSchema:h,registry:f})})]})}:{className:i,style:n,children:p})}function Fe(e,r){for(var a=[],i=e;i<=r;i++)a.push({value:i,label:t.pad(i,2)});return a}function De(e,r,t){void 0===t&&(t=[1900,(new Date).getFullYear()+2]);var a=[{type:"year",range:t,value:e.year},{type:"month",range:[1,12],value:e.month},{type:"day",range:[1,31],value:e.day}];return r&&a.push({type:"hour",range:[0,23],value:e.hour},{type:"minute",range:[0,59],value:e.minute},{type:"second",range:[0,59],value:e.second}),a}function Oe(r){var a=r.type,i=r.range,n=r.value,o=r.select,s=r.rootId,l=r.disabled,d=r.readonly,u=r.autofocus,c=r.registry,m=r.onBlur,p=r.onFocus;return e.jsx(c.widgets.SelectWidget,{schema:{type:"integer"},id:s+"_"+a,name:r.name,className:"form-control",options:{enumOptions:Fe(i[0],i[1])},placeholder:a,value:n,disabled:l,readonly:d,autofocus:u,onChange:function(e){return o(a,e)},onBlur:m,onFocus:p,registry:c,label:"","aria-describedby":t.ariaDescribedByIds(s)})}function Te(a){var i=a.time,n=void 0!==i&&i,o=a.disabled,s=void 0!==o&&o,l=a.readonly,d=void 0!==l&&l,u=a.autofocus,c=void 0!==u&&u,m=a.options,p=a.id,h=a.name,f=a.registry,g=a.onBlur,v=a.onFocus,y=a.onChange,S=a.value,b=f.translateString,x=r.useState(S),C=x[0],j=x[1],F=r.useReducer((function(e,r){return T({},e,r)}),t.parseDateString(S,n)),D=F[0],O=F[1];r.useEffect((function(){var e=t.toDateString(D,n);!function(e){return Object.values(e).every((function(e){return-1!==e}))}(D)||e===S?C!==S&&(j(S),O(t.parseDateString(S,n))):y(e)}),[n,S,y,D,C]);var E=r.useCallback((function(e,r){var t;O(((t={})[e]=r,t))}),[]),I=r.useCallback((function(e){if(e.preventDefault(),!s&&!d){var r=t.parseDateString((new Date).toJSON(),n);y(t.toDateString(r,n))}}),[s,d,n]),k=r.useCallback((function(e){e.preventDefault(),s||d||y(void 0)}),[s,d,y]);return e.jsxs("ul",{className:"list-inline",children:[De(D,n,m.yearsRange).map((function(r,t){return e.jsx("li",{className:"list-inline-item",children:e.jsx(Oe,T({rootId:p,name:h,select:E},r,{disabled:s,readonly:d,registry:f,onBlur:g,onFocus:v,autofocus:c&&0===t}))},t)})),("undefined"===m.hideNowButton||!m.hideNowButton)&&e.jsx("li",{className:"list-inline-item",children:e.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:I,children:b(t.TranslatableString.NowLabel)})}),("undefined"===m.hideClearButton||!m.hideClearButton)&&e.jsx("li",{className:"list-inline-item",children:e.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:k,children:b(t.TranslatableString.ClearLabel)})})]})}var Ee=["time"];function Ie(r){var t=r.time,a=void 0===t||t,i=k(r,Ee);return e.jsx(i.registry.widgets.AltDateWidget,T({time:a},i))}function ke(a){var i,n=a.schema,o=a.uiSchema,s=a.options,l=a.id,d=a.value,u=a.disabled,c=a.readonly,m=a.label,p=a.hideLabel,h=a.autofocus,f=void 0!==h&&h,g=a.onBlur,v=a.onFocus,y=a.onChange,S=a.registry,b=t.getTemplate("DescriptionFieldTemplate",S,s),x=t.schemaRequiresTrueValue(n),C=r.useCallback((function(e){return y(e.target.checked)}),[y]),j=r.useCallback((function(e){return g(l,e.target.checked)}),[g,l]),F=r.useCallback((function(e){return v(l,e.target.checked)}),[v,l]),D=null!=(i=s.description)?i:n.description;return e.jsxs("div",{className:"checkbox "+(u||c?"disabled":""),children:[!p&&!!D&&e.jsx(b,{id:t.descriptionId(l),description:D,schema:n,uiSchema:o,registry:S}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",id:l,name:l,checked:void 0!==d&&d,required:x,disabled:u||c,autoFocus:f,onChange:C,onBlur:j,onFocus:F,"aria-describedby":t.ariaDescribedByIds(l)}),t.labelValue(e.jsx("span",{children:m}),p)]})]})}function we(a){var i=a.id,n=a.disabled,o=a.options,s=o.inline,l=void 0!==s&&s,d=o.enumOptions,u=o.enumDisabled,c=o.emptyValue,m=a.value,p=a.autofocus,h=void 0!==p&&p,f=a.readonly,g=a.onChange,v=a.onBlur,y=a.onFocus,S=Array.isArray(m)?m:[m],b=r.useCallback((function(e){return v(i,t.enumOptionsValueForIndex(e.target.value,d,c))}),[v,i]),x=r.useCallback((function(e){return y(i,t.enumOptionsValueForIndex(e.target.value,d,c))}),[y,i]);return e.jsx("div",{className:"checkboxes",id:i,children:Array.isArray(d)&&d.map((function(r,a){var o=t.enumOptionsIsSelected(r.value,S),s=Array.isArray(u)&&-1!==u.indexOf(r.value),c=n||s||f?"disabled":"",m=e.jsxs("span",{children:[e.jsx("input",{type:"checkbox",id:t.optionId(i,a),name:i,checked:o,value:String(a),disabled:n||s||f,autoFocus:h&&0===a,onChange:function(e){g(e.target.checked?t.enumOptionsSelectValue(a,S,d):t.enumOptionsDeselectValue(a,S,d))},onBlur:b,onFocus:x,"aria-describedby":t.ariaDescribedByIds(i)}),e.jsx("span",{children:r.label})]});return l?e.jsx("label",{className:"checkbox-inline "+c,children:m},a):e.jsx("div",{className:"checkbox "+c,children:e.jsx("label",{children:m})},a)}))})}function Ne(r){var a=r.disabled,i=r.readonly,n=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(n,T({type:"color"},r,{disabled:a||i}))}function Ae(a){var i=a.onChange,n=t.getTemplate("BaseInputTemplate",a.registry,a.options),o=r.useCallback((function(e){return i(e||void 0)}),[i]);return e.jsx(n,T({type:"date"},a,{onChange:o}))}function Be(r){var a=r.onChange,i=r.value,n=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(n,T({type:"datetime-local"},r,{value:t.utcToLocal(i),onChange:function(e){return a(t.localToUTC(e))}}))}function Ue(r){var a=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(a,T({type:"email"},r))}function Pe(e,r){return null===e?null:e.replace(";base64",";name="+encodeURIComponent(r)+";base64")}function qe(e){var r=e.name,t=e.size,a=e.type;return new Promise((function(i,n){var o=new window.FileReader;o.onerror=n,o.onload=function(e){var n;"string"==typeof(null===(n=e.target)||void 0===n?void 0:n.result)?i({dataURL:Pe(e.target.result,r),name:r,size:t,type:a}):i({dataURL:null,name:r,size:t,type:a})},o.readAsDataURL(e)}))}function _e(r){var a=r.fileInfo,i=r.registry.translateString,n=a.dataURL,o=a.name;return n?-1!==a.type.indexOf("image")?e.jsx("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):e.jsxs(e.Fragment,{children:[" ",e.jsx("a",{download:"preview-"+o,href:n,className:"file-download",children:i(t.TranslatableString.PreviewLabel)})]}):null}function Re(r){var a=r.filesInfo,i=r.registry,n=r.preview;if(0===a.length)return null;var o=i.translateString;return e.jsx("ul",{className:"file-info",children:a.map((function(r,a){return e.jsxs("li",{children:[e.jsx(F.default,{children:o(t.TranslatableString.FilesInfo,[r.name,r.type,String(r.size)])}),n&&e.jsx(_e,{fileInfo:r,registry:i})]},a)}))})}function Ve(e){return e.filter((function(e){return e})).map((function(e){var r=t.dataURItoBlob(e),a=r.blob;return{dataURL:e,name:r.name,size:a.size,type:a.type}}))}function Le(a){var i=a.disabled,n=a.readonly,o=a.multiple,s=a.onChange,l=a.value,d=a.options,u=a.registry,c=t.getTemplate("BaseInputTemplate",u,d),m=r.useMemo((function(){return Array.isArray(l)?Ve(l):Ve([l])}),[l]),p=r.useState(m),h=p[0],f=p[1],g=r.useCallback((function(e){var r;e.target.files&&(r=e.target.files,Promise.all(Array.from(r).map(qe))).then((function(e){f(e);var r=e.map((function(e){return e.dataURL}));s(o?r:r[0])}))}),[o,s]);return e.jsxs("div",{children:[e.jsx(c,T({},a,{disabled:i||n,type:"file",onChangeOverride:g,value:"",accept:d.accept?String(d.accept):void 0})),e.jsx(Re,{filesInfo:h,registry:u,preview:d.filePreview})]})}function Ke(r){var t=r.id,a=r.value;return e.jsx("input",{type:"hidden",id:t,name:t,value:void 0===a?"":a})}function We(r){var a=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(a,T({type:"password"},r))}function Me(a){var i=a.options,n=a.value,o=a.required,s=a.disabled,l=a.readonly,d=a.autofocus,u=void 0!==d&&d,c=a.onBlur,m=a.onFocus,p=a.onChange,h=a.id,f=Math.random().toString(),g=i.enumOptions,v=i.enumDisabled,y=i.inline,S=i.emptyValue,b=r.useCallback((function(e){return c(h,t.enumOptionsValueForIndex(e.target.value,g,S))}),[c,h]),x=r.useCallback((function(e){return m(h,t.enumOptionsValueForIndex(e.target.value,g,S))}),[m,h]);return e.jsx("div",{className:"field-radio-group",id:h,children:Array.isArray(g)&&g.map((function(r,a){var i=t.enumOptionsIsSelected(r.value,n),d=Array.isArray(v)&&-1!==v.indexOf(r.value),c=s||d||l?"disabled":"",m=e.jsxs("span",{children:[e.jsx("input",{type:"radio",id:t.optionId(h,a),checked:i,name:f,required:o,value:String(a),disabled:s||d||l,autoFocus:u&&0===a,onChange:function(){return p(r.value)},onBlur:b,onFocus:x,"aria-describedby":t.ariaDescribedByIds(h)}),e.jsx("span",{children:r.label})]});return y?e.jsx("label",{className:"radio-inline "+c,children:m},a):e.jsx("div",{className:"radio "+c,children:e.jsx("label",{children:m})},a)}))})}function Ye(r){var t=r.value;return e.jsxs("div",{className:"field-range-wrapper",children:[e.jsx(r.registry.templates.BaseInputTemplate,T({type:"range"},r)),e.jsx("span",{className:"range-view",children:t})]})}function $e(e,r){return r?Array.from(e.target.options).slice().filter((function(e){return e.selected})).map((function(e){return e.value})):e.target.value}function ze(a){var i=a.schema,n=a.id,o=a.options,s=a.value,l=a.required,d=a.disabled,u=a.readonly,c=a.multiple,m=void 0!==c&&c,p=a.autofocus,h=void 0!==p&&p,f=a.onChange,g=a.onBlur,v=a.onFocus,y=a.placeholder,S=o.enumOptions,b=o.enumDisabled,x=o.emptyValue,C=m?[]:"",j=r.useCallback((function(e){var r=$e(e,m);return v(n,t.enumOptionsValueForIndex(r,S,x))}),[v,n,i,m,o]),F=r.useCallback((function(e){var r=$e(e,m);return g(n,t.enumOptionsValueForIndex(r,S,x))}),[g,n,i,m,o]),D=r.useCallback((function(e){var r=$e(e,m);return f(t.enumOptionsValueForIndex(r,S,x))}),[f,i,m,o]),O=t.enumOptionsIndexForValue(s,S,m);return e.jsxs("select",{id:n,name:n,multiple:m,className:"form-control",value:void 0===O?C:O,required:l,disabled:d||u,autoFocus:h,onBlur:F,onFocus:j,onChange:D,"aria-describedby":t.ariaDescribedByIds(n),children:[!m&&void 0===i.default&&e.jsx("option",{value:"",children:y}),Array.isArray(S)&&S.map((function(r,t){var a=r.label,i=b&&-1!==b.indexOf(r.value);return e.jsx("option",{value:String(t),disabled:i,children:a},t)}))]})}function Ge(a){var i=a.id,n=a.options,o=void 0===n?{}:n,s=a.placeholder,l=a.value,d=a.required,u=a.disabled,c=a.readonly,m=a.autofocus,p=void 0!==m&&m,h=a.onChange,f=a.onBlur,g=a.onFocus,v=r.useCallback((function(e){var r=e.target.value;return h(""===r?o.emptyValue:r)}),[h,o.emptyValue]),y=r.useCallback((function(e){return f(i,e.target.value)}),[f,i]),S=r.useCallback((function(e){return g(i,e.target.value)}),[i,g]);return e.jsx("textarea",{id:i,name:i,className:"form-control",value:l||"",placeholder:s,required:d,disabled:u,readOnly:c,autoFocus:p,rows:o.rows,onBlur:y,onFocus:S,onChange:v,"aria-describedby":t.ariaDescribedByIds(i)})}function He(r){var a=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(a,T({},r))}function Je(a){var i=a.onChange,n=t.getTemplate("BaseInputTemplate",a.registry,a.options),o=r.useCallback((function(e){return i(e?e+":00":void 0)}),[i]);return e.jsx(n,T({type:"time"},a,{onChange:o}))}function Qe(r){var a=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(a,T({type:"url"},r))}function Xe(r){var a=t.getTemplate("BaseInputTemplate",r.registry,r.options);return e.jsx(a,T({type:"number"},r))}function Ze(){return{fields:{AnyOfField:L,ArrayField:q,BooleanField:R,NumberField:M,ObjectField:Y,OneOfField:L,SchemaField:H,StringField:Q,NullField:X},templates:{ArrayFieldDescriptionTemplate:Z,ArrayFieldItemTemplate:ee,ArrayFieldTemplate:te,ArrayFieldTitleTemplate:ae,ButtonTemplates:{SubmitButton:oe,AddButton:pe,CopyButton:de,MoveDownButton:ue,MoveUpButton:ce,RemoveButton:me},BaseInputTemplate:ne,DescriptionFieldTemplate:he,ErrorListTemplate:fe,FieldTemplate:ve,FieldErrorTemplate:ye,FieldHelpTemplate:Se,ObjectFieldTemplate:be,TitleFieldTemplate:xe,UnsupportedFieldTemplate:Ce,WrapIfAdditionalTemplate:je},widgets:{AltDateWidget:Te,AltDateTimeWidget:Ie,CheckboxWidget:ke,CheckboxesWidget:we,ColorWidget:Ne,DateWidget:Ae,DateTimeWidget:Be,EmailWidget:Ue,FileWidget:Le,HiddenWidget:Ke,PasswordWidget:We,RadioWidget:Me,RangeWidget:Ye,SelectWidget:ze,TextWidget:He,TextareaWidget:Ge,TimeWidget:Je,UpDownWidget:Xe,URLWidget:Qe},rootSchema:{},formContext:{},translateString:t.englishStringTranslator}}Ge.defaultProps={autofocus:!1,options:{}};var er=function(a){function i(e){var i;if((i=a.call(this,e)||this).formElement=void 0,i.getUsedFormData=function(e,r){if(0===r.length&&"object"!=typeof e)return e;var t=y.default(e,r);return Array.isArray(e)?Object.keys(t).map((function(e){return t[e]})):t},i.getFieldNames=function(e,r){return function e(a,i,n){return void 0===i&&(i=[]),void 0===n&&(n=[[]]),Object.keys(a).forEach((function(o){if("object"==typeof a[o]){var s=n.map((function(e){return[].concat(e,[o])}));a[o][t.RJSF_ADDITONAL_PROPERTIES_FLAG]&&""!==a[o][t.NAME_KEY]?i.push(a[o][t.NAME_KEY]):e(a[o],i,s)}else o===t.NAME_KEY&&""!==a[o]&&n.forEach((function(e){var t=g.default(r,e);("object"!=typeof t||v.default(t))&&i.push(e)}))})),i}(e)},i.onChange=function(e,r,a){var n=i.props,o=n.extraErrors,s=n.omitExtraData,l=n.liveOmit,d=n.noValidate,u=n.liveValidate,c=n.onChange,m=i.state,p=m.schemaUtils,h=m.schema;(t.isObject(e)||Array.isArray(e))&&(e=i.getStateFromProps(i.props,e).formData);var f=!d&&u,g={formData:e,schema:h},v=e;if(!0===s&&!0===l){var y=p.retrieveSchema(h,e),S=p.toPathSchema(y,"",e),b=i.getFieldNames(S,e);v=i.getUsedFormData(e,b),g={formData:v}}if(f){var x=i.validate(v),C=x.errors,j=x.errorSchema,F=C,D=j;if(o){var O=p.mergeValidationData(x,o);j=O.errorSchema,C=O.errors}g={formData:v,errors:C,errorSchema:j,schemaValidationErrors:F,schemaValidationErrorSchema:D}}else if(!d&&r){var E=o?t.mergeObjects(r,o,"preventDuplicates"):r;g={formData:v,errorSchema:E,errors:p.getValidator().toErrorList(E)}}i.setState(g,(function(){return c&&c(T({},i.state,g),a)}))},i.reset=function(){var e=i.props.onChange,r={formData:i.getStateFromProps(i.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};i.setState(r,(function(){return e&&e(T({},i.state,r))}))},i.onBlur=function(e,r){var t=i.props.onBlur;t&&t(e,r)},i.onFocus=function(e,r){var t=i.props.onFocus;t&&t(e,r)},i.onSubmit=function(e){if(e.preventDefault(),e.target===e.currentTarget){e.persist();var r=i.props,t=r.extraErrors,a=r.noValidate,n=r.onSubmit,o=i.state.formData,s=i.state,l=s.schemaUtils;if(!0===r.omitExtraData){var d=l.retrieveSchema(s.schema,o),u=l.toPathSchema(d,"",o),c=i.getFieldNames(u,o);o=i.getUsedFormData(o,c)}if(a||i.validateForm()){var m=t||{},p=t?l.getValidator().toErrorList(t):[];i.setState({formData:o,errors:p,errorSchema:m,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(function(){n&&n(T({},i.state,{formData:o,status:"submitted"}),e)}))}}},!e.validator)throw new Error("A validator is required for Form functionality to work");return i.state=i.getStateFromProps(e,e.formData),i.props.onChange&&!t.deepEquals(i.state.formData,i.props.formData)&&i.props.onChange(i.state),i.formElement=r.createRef(),i}E(i,a);var n=i.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var r=this.getStateFromProps(e,e.formData);t.deepEquals(r.formData,e.formData)||t.deepEquals(r.formData,this.state.formData)||!e.onChange||e.onChange(r),this.setState(r)},n.getStateFromProps=function(e,r){var a=this.state||{},i="schema"in e?e.schema:this.props.schema,n=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},o=void 0!==r,s=o&&!e.noValidate&&("liveValidate"in e?e.liveValidate:this.props.liveValidate),l=i,d=a.schemaUtils;d&&!d.doesSchemaUtilsDiffer(e.validator,l)||(d=t.createSchemaUtils(e.validator,l));var u,c,m=d.getDefaultFormState(i,r),p=d.retrieveSchema(i,m),h=a.schemaValidationErrors,f=a.schemaValidationErrorSchema;if(s){var g=this.validate(m,i,d);h=u=g.errors,f=c=g.errorSchema}else{var v=e.noValidate?{errors:[],errorSchema:{}}:e.liveValidate?{errors:a.errors||[],errorSchema:a.errorSchema||{}}:{errors:a.schemaValidationErrors||[],errorSchema:a.schemaValidationErrorSchema||{}};u=v.errors,c=v.errorSchema}if(e.extraErrors){var y=d.mergeValidationData({errorSchema:c,errors:u},e.extraErrors);c=y.errorSchema,u=y.errors}var S=d.toIdSchema(p,n["ui:rootFieldId"],m,e.idPrefix,e.idSeparator);return{schemaUtils:d,schema:i,uiSchema:n,idSchema:S,formData:m,edit:o,errors:u,errorSchema:c,schemaValidationErrors:h,schemaValidationErrorSchema:f}},n.shouldComponentUpdate=function(e,r){return t.shouldRender(this,e,r)},n.validate=function(e,r,t){void 0===r&&(r=this.props.schema);var a=t||this.state.schemaUtils,i=this.props,n=i.customValidate,o=i.transformErrors,s=i.uiSchema,l=a.retrieveSchema(r,e);return a.getValidator().validateFormData(e,l,n,o,s)},n.renderErrors=function(r){var a=this.state,i=a.errors,n=a.errorSchema,o=a.schema,s=a.uiSchema,l=this.props.formContext,d=t.getUiOptions(s),u=t.getTemplate("ErrorListTemplate",r,d);return i&&i.length?e.jsx(u,{errors:i,errorSchema:n||{},schema:o,uiSchema:s,formContext:l,registry:r}):null},n.getRegistry=function(){var e,r=this.props,a=r.translateString,i=r.uiSchema,n=void 0===i?{}:i,o=this.state.schemaUtils,s=Ze(),l=s.templates,d=s.widgets,u=s.formContext,c=s.translateString;return{fields:T({},s.fields,this.props.fields),templates:T({},l,this.props.templates,{ButtonTemplates:T({},l.ButtonTemplates,null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates)}),widgets:T({},d,this.props.widgets),rootSchema:this.props.schema,formContext:this.props.formContext||u,schemaUtils:o,translateString:a||c,globalUiOptions:n[t.UI_GLOBAL_OPTIONS_KEY]}},n.submit=function(){this.formElement.current&&(this.formElement.current.dispatchEvent(new CustomEvent("submit",{cancelable:!0})),this.formElement.current.requestSubmit())},n.focusOnError=function(e){var r=this.props,t=r.idPrefix,a=void 0===t?"root":t,i=r.idSeparator,n=void 0===i?"_":i,o=S.default(e.property);""===o[0]?o[0]=a:o.unshift(a);var s=o.join(n),l=this.formElement.current.elements[s];l||(l=this.formElement.current.querySelector("input[id^="+s)),l&&l.focus()},n.validateForm=function(){var e=this.props,r=e.extraErrors,t=e.focusOnFirstError,a=e.onError,i=this.state.schemaUtils,n=this.validate(this.state.formData),o=n.errors,s=n.errorSchema,l=o,d=s;if(o.length>0){if(r){var u=i.mergeValidationData(n,r);s=u.errorSchema,o=u.errors}return t&&this.focusOnError(n.errors[0]),this.setState({errors:o,errorSchema:s,schemaValidationErrors:l,schemaValidationErrorSchema:d},(function(){a?a(o):console.error("Form validation failed",o)})),!1}return!0},n.render=function(){var r=this.props,t=r.children,a=r.id,i=r.idPrefix,n=r.idSeparator,o=r.className,s=void 0===o?"":o,l=r.tagName,d=r.name,u=r.method,c=r.target,m=r.action,p=r.autoComplete,h=r.enctype,f=r.acceptcharset,g=r.noHtml5Validate,v=void 0!==g&&g,y=r.disabled,S=void 0!==y&&y,b=r.readonly,x=void 0!==b&&b,C=r.formContext,j=r.showErrorList,F=void 0===j?"top":j,D=r._internalFormWrapper,O=this.state,T=O.schema,E=O.uiSchema,I=O.formData,k=O.errorSchema,w=O.idSchema,N=this.getRegistry(),A=N.fields.SchemaField,B=N.templates.ButtonTemplates.SubmitButton;return e.jsxs(D||l||"form",{className:s||"rjsf",id:a,name:d,method:u,target:c,action:m,autoComplete:p,encType:h,acceptCharset:f,noValidate:v,onSubmit:this.onSubmit,as:D?l:void 0,ref:this.formElement,children:["top"===F&&this.renderErrors(N),e.jsx(A,{name:"",schema:T,uiSchema:E,errorSchema:k,idSchema:w,idPrefix:i,idSeparator:n,formContext:C,formData:I,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:N,disabled:S,readonly:x}),t||e.jsx(B,{uiSchema:E,registry:N}),"bottom"===F&&this.renderErrors(N)]})},i}(r.Component),rr=["fields","widgets","templates"];exports.default=er,exports.getDefaultRegistry=Ze,exports.withTheme=function(t){return r.forwardRef((function(r,a){var i,n,o=r.fields,s=r.widgets,l=r.templates,d=k(r,rr);return o=T({},null==t?void 0:t.fields,o),s=T({},null==t?void 0:t.widgets,s),l=T({},null==t?void 0:t.templates,l,{ButtonTemplates:T({},null==t||null===(i=t.templates)||void 0===i?void 0:i.ButtonTemplates,null===(n=l)||void 0===n?void 0:n.ButtonTemplates)}),e.jsx(er,T({},t,d,{fields:o,widgets:s,templates:l,ref:a}))}))};
//# sourceMappingURL=core.cjs.production.min.js.map
